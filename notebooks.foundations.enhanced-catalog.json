{"version":2,"kind":"Notebook","sha256":"7e6a17d045a7af0f60516bd0bb802cd8b7fb388067e24060ad9fb9d921e29605","slug":"notebooks.foundations.enhanced-catalog","location":"/notebooks/foundations/enhanced-catalog.ipynb","dependencies":[],"frontmatter":{"title":"Enhanced Intake-ESM Catalog Demo","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bonnlander","given":"Brian","family":"Bonnlander"},"name":"Brian Bonnlander","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Jeff de La Beaujardière","given":"Jeff","non_dropping_particle":"de","family":"La Beaujardière"},"name":"Jeff de La Beaujardière","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Scott Henderson","given":"Scott","family":"Henderson"},"name":"Scott Henderson","id":"contributors-myst-generated-uid-3"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/cesm-lens-aws-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/cesm-lens-aws-cookbook/blob/main/notebooks/foundations/enhanced-catalog.ipynb","thumbnail":"/cesm-lens-aws-cookbook/build/thumbnail-d20a3e15355fc203ce3f3063ab1fa4ef.png","exports":[{"format":"ipynb","filename":"enhanced-catalog.ipynb","url":"/cesm-lens-aws-cookbook/build/enhanced-catalog-b2037c0bfb1f0e30a817b78735f62d35.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"image","url":"/cesm-lens-aws-cookbook/build/thumbnail-d20a3e15355fc203ce3f3063ab1fa4ef.png","alt":"CESM LENS image","width":250,"key":"GptH3aqyrm","urlSource":"../../thumbnail.png"}],"key":"y0eYduDkEv"}],"key":"tJfqHyfqRD"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FfrrmpYKU4"}],"key":"NqSEEuL6hL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tUMQnLeIfr"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"Yg8FMHbtEy"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook compares one ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Q0FZ8M0WGq"},{"type":"link","url":"https://intake-esm.readthedocs.io/en/stable/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Intake-ESM","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"QbymY5SrAL"}],"urlSource":"https://intake-esm.readthedocs.io/en/stable/","key":"eZHKoyDx3R"},{"type":"text","value":" catalog with an enhanced version that includes additional attributes. Both catalogs are an inventory of the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"D6B05qm6kk"},{"type":"cite","url":"https://doi.org/10.26024/wt24-5j82","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NCAR Community Earth System Model (CESM) Large Ensemble (LENS) data hosted on AWS S3","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tcsWPxOnN6"}],"kind":"narrative","label":"https://doi.org/10.26024/wt24-5j82","identifier":"https://doi.org/10.26024/wt24-5j82","enumerator":"1","key":"i9ZpqaYfWh"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xyMjdrqV7j"}],"key":"J3PK6fV1D2"}],"key":"KidZociVct"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ItknwUKta9"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"eH1jzS6aj0"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FtvWnuQ3Ou"}],"key":"iGCpwZYhjj"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iA5iBxinN5"}],"key":"WxXXk2r8ew"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NC80Ni62DX"}],"key":"HknIYHusf7"}],"key":"MpDn5L92UI"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/pandas/pandas.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to Pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hAUvKvYkRu"}],"urlSource":"https://foundations.projectpythia.org/core/pandas/pandas.html","key":"SOhEnQSOEu"}],"key":"eIqwD24B3s"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JySEIutf1V"}],"key":"o90wkgYW9i"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[],"key":"hBhqgTR25I"}],"key":"Xc65hhlqFM"}],"key":"IcRSoO9zwC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vkLKbXfxQW"}],"key":"b3hQckgWxr"},{"type":"text","value":": 10 minutes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"AiLSpY53Sm"}],"key":"FWGSpsZMhP"}],"key":"hyipLa9Tpl"}],"key":"TBReiSEyoq"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r7agB2YxJx"}],"key":"gp6PDOS3b8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bAjN0K18sE"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"jUBEFnBBbK"}],"key":"UxM9XjAaF6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import intake\nimport pandas as pd","key":"mPB6a8GGn4"},{"type":"output","id":"iD42uYTW5TOdsMFPxysQC","data":[],"key":"ww950pEUEI"}],"key":"xG2ViQKHUd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Original Intake-ESM Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A5SKndx4PR"}],"identifier":"original-intake-esm-catalog","label":"Original Intake-ESM Catalog","html_id":"original-intake-esm-catalog","implicit":true,"key":"FylIQmzs0z"}],"key":"A9bOhDzYvc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"At import time, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PjMX714azR"},{"type":"inlineCode","value":"intake-esm","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xuTsuErKSU"},{"type":"text","value":" plugin is available in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E2n4PcJnE2"},{"type":"inlineCode","value":"intake","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nwwz8yMeus"},{"type":"text","value":"’s registry as ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v8qyRt3BK6"},{"type":"inlineCode","value":"esm_datastore","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GN43SRUz01"},{"type":"text","value":" and can be accessed with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zp6NRAKs5K"},{"type":"inlineCode","value":"intake.open_esm_datastore()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UYDI31GsCK"},{"type":"text","value":" function.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ayp2RZLIgh"}],"key":"s8MplWxNY8"}],"key":"MbNjrgOxWz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url_orig = 'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le.json'\ncoll_orig = intake.open_esm_datastore(cat_url_orig)\ncoll_orig","key":"dkV0eWJg1m"},{"type":"output","id":"H01lnw-yng1K3qq7ioyCB","data":[],"key":"Q2Mf2j0duR"}],"key":"mwcLy0Hmly"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Here’s a summary representation:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BrheZKJceo"}],"key":"BZe1GBiKft"}],"key":"VamwY368HZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(coll_orig)","key":"ndChzrjPJK"},{"type":"output","id":"1IObxTj0QgArFSuAyFbQK","data":[],"key":"yqN4eetaA1"}],"key":"m0Iygc4xzG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In an Intake-ESM catalog object, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X2niEWwfMh"},{"type":"inlineCode","value":"esmcat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tcI9MeN8T6"},{"type":"text","value":" class provides many useful attributes and functions. For example, we can get the collection’s description:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sAhTAXuWYV"}],"key":"mP2TegLfr7"}],"key":"K2sUO6OXaQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_orig.esmcat.description","key":"fSWbqykfz9"},{"type":"output","id":"oaBfC3Iy1ktTu2eOoz3g5","data":[],"key":"tn0fswg2To"}],"key":"BJAbtvDzXb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also get the URL pointing to the catalog’s underlying tabular representation:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"djDWlkNRmK"}],"key":"EoBiJ4SAeo"}],"key":"OKWejOuMdU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_orig.esmcat.catalog_file","key":"yPmvFxWUQW"},{"type":"output","id":"6WMAvwpJgcU11YI0NskWv","data":[],"key":"WgJy3yAS3D"}],"key":"EONO0WLS5K"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"That’s a CSV file ... let’s take a peek.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F4giYX563J"}],"key":"jb5KtfLDw8"}],"key":"xI9RZ2u554"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_orig = pd.read_csv(coll_orig.esmcat.catalog_file)\ndf_orig","key":"e8vDjUZJt6"},{"type":"output","id":"NiRfdMslMLTEPjB7RJC9x","data":[],"key":"Bjv9JnVtir"}],"key":"TYP9Kg7Rvf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"However, we can save a step since an ESM catalog object provides a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oaH8w0Xkol"},{"type":"inlineCode","value":"df","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EzUFlkcn7N"},{"type":"text","value":" instance which returns a dataframe too:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zo30BZnMMu"}],"key":"P7d4hG8UVA"}],"key":"iFYaOsIWbW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_orig = coll_orig.df\ndf_orig","key":"scgmhomVaQ"},{"type":"output","id":"aXTq1NmZcXewcFWVOyVSG","data":[],"key":"gLv1crpKir"}],"key":"xW1YO5vN0h"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Print out a sorted list of the unique values of selected columns","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"enRXjQ3qId"}],"key":"uHRIEUOI3H"}],"key":"wgp7Vnn5PN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for col in ['component', 'frequency', 'experiment', 'variable']:\n    unique_vals = coll_orig.unique()[col]\n    unique_vals.sort()\n    count = len(unique_vals)\n    print (col + ': ' ,unique_vals, \" count: \", count, '\\n')","key":"yMhDK1GAuo"},{"type":"output","id":"vKjwHf3n301uhAENZPWsq","data":[],"key":"NhUXf8AosG"}],"key":"hND9MyRNyE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finding Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dttePO8lKE"}],"identifier":"finding-data","label":"Finding Data","html_id":"finding-data","implicit":true,"key":"EdvPXGLBbu"}],"key":"UNNexpMXWu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you happen to know the meaning of the variable names, you can find what data are available for that variable. For example:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dh92Z6rJlu"}],"key":"T2sPqcCtdu"}],"key":"XxBAXkF1y3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll_orig.search(variable='FLNS').df\ndf","key":"YfmaDKOrqa"},{"type":"output","id":"rDntc6qKHauqYZ1qCm6RB","data":[],"key":"neI7hwCsry"}],"key":"X2XZSzzQr5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can narrow the filter to specific frequency and experiment:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IA3uvcjIdF"}],"key":"E9fjuB19jS"}],"key":"mZtkG0Hape"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll_orig.search(variable='FLNS', frequency='daily', experiment='RCP85').df\ndf","key":"WIuEmvRV6R"},{"type":"output","id":"QQ6sgCfG0y3TwQLd70rvI","data":[],"key":"tU3Z6TIN2q"}],"key":"YLB7588wAJ"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-warning","children":[{"type":"strong","children":[{"type":"text","value":"The problem: ","key":"Lgg3xGaRwo"}],"key":"fIAvXeUgr1"},{"type":"text","value":"Do all potential users know that `FLNS` is a CESM-specific abbreviation for \"net longwave flux at surface”? How would a novice user find out, other than by finding separate documentation, or by opening a Zarr store in the hopes that the long name might be recorded there? How do we address the fact that every climate model code seems to have a different, non-standard name for all the variables, thus making multi-source research needlessly difficult?","key":"Ipe6oVN6Ex"}],"key":"VXc8t6kpzK"}],"key":"dE1V5L4ZIl"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-success","children":[{"type":"strong","children":[{"type":"text","value":"The solution:","key":"Qu8dMVwZaT"}],"key":"KJDPQsbWgF"},{"type":"break","key":"ALgWHVjrno"},{"type":"heading","depth":2,"children":[{"type":"emphasis","children":[{"type":"text","value":"Enhanced","key":"Y13TWY4y1f"}],"key":"L898uDxP9l"},{"type":"text","value":" Intake-ESM Catalog!","key":"CNR4ftOfnU"}],"identifier":"enhanced-intake-esm-catalog","label":"Enhanced Intake-ESM Catalog!","html_id":"enhanced-intake-esm-catalog","implicit":true,"key":"W7pwqqCJVZ"}],"key":"MdHrNY4KD3"}],"key":"icuUj188DJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"By adding additional columns to the Intake-ESM catalog, we should be able to improve semantic interoperability and provide potentially useful information to the users. Let’s now open the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J6lXyDhR01"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"enhanced","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"neTHUWHnCM"}],"key":"aDDXRYFGJJ"},{"type":"text","value":" collection description file:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OUKyRgX26C"}],"key":"rLj6WFzjCW"}],"key":"fgVbbKKrUH"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-info","children":[{"type":"strong","children":[{"type":"text","value":"Note: ","key":"gZuaVugNku"}],"key":"DHEVlWfFzW"},{"type":"text","value":"The URL for the enhanced catalog differs from the original only in that it has ","key":"GekM98GE0k"},{"type":"inlineCode","value":"-enhanced","key":"xOOOSqMmW0"},{"type":"text","value":" appended to ","key":"uz2teud8Vf"},{"type":"inlineCode","value":"aws-cesm1-le","key":"jhIazVkshQ"}],"key":"UiJWgLbpM8"}],"key":"c6iqHCGPRe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url = 'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le-enhanced.json'\ncoll = intake.open_esm_datastore(cat_url)\ncoll","key":"qHKlZA7lJn"},{"type":"output","id":"uQzs6RllUvCSsB6kKU4bH","data":[],"key":"IHZqqro5lC"}],"key":"oBpOj2yfxC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As we did for the first catalog, let’s obtain the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TaX3Yfcwol"},{"type":"inlineCode","value":"description","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aiGhlOU7kQ"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UyFmzdTRrZ"},{"type":"inlineCode","value":"catalog_file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pF3BRN2eM4"},{"type":"text","value":" attributes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ptVIrWvYp1"}],"key":"wY0ZmLymBj"}],"key":"awksmzGfPh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(coll.esmcat.description) # Description of collection\nprint(\"Catalog file:\", coll.esmcat.catalog_file)\nprint(coll) # Summary of collection structure","key":"i6xjJNsLar"},{"type":"output","id":"7yV7QKkP3xQ31IKpr2v7k","data":[],"key":"VV4waS8wtP"}],"key":"ArJBk8zCbK"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Long names","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eXxxPlvFjc"}],"identifier":"long-names","label":"Long names","html_id":"long-names","implicit":true,"key":"nCTODuqSvx"}],"visibility":"show","key":"X4AEqPPL29"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In the catalog’s representation above, note the addition of additional elements: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ScU5Zdmq7U"},{"type":"inlineCode","value":"long_name","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gv8V4zGO2m"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JjMlhveyCD"},{"type":"inlineCode","value":"start","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A8J0ExhN4V"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JtSlSO87lI"},{"type":"inlineCode","value":"end","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a1fgNMZUBh"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CNXT3jAQoI"},{"type":"inlineCode","value":"dim","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AxtOrvg7gv"},{"type":"text","value":". Here are the first/last few lines of the enhanced catalog:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Dby8nUvNHM"}],"key":"YvdqUa5sWs"}],"key":"obFlr2vqi4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_enh = coll.df\ndf_enh","key":"bu8rWgi40W"},{"type":"output","id":"HIARRqzW9Gt0mB74s7rl3","data":[],"key":"GmtoetpIyM"}],"key":"sDLXFv66dN"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Warning","key":"CASIpv0ejX"}],"key":"wOL5HGalZF"},{"type":"text","value":"The ","key":"csNgceaeFD"},{"type":"inlineCode","value":"long_name","key":"mt2Mvd0R9o"},{"type":"text","value":"s are ","key":"xr35t04ev3"},{"type":"emphasis","children":[{"type":"text","value":"not","key":"r9PlizdBV7"}],"key":"KC4TZbWIOI"},{"type":"text","value":" ","key":"hLTJZ5stuj"},{"type":"link","url":"https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html","children":[{"type":"text","value":"CF Standard Names","key":"VbBRTd0E1D"}],"urlSource":"https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html","key":"PZ9cPxep1G"},{"type":"text","value":", but rather are those documented at ","key":"G7uE23E0DB"},{"type":"link","url":"https://www.cesm.ucar.edu/projects/community-projects/LENS/data-sets.html","children":[{"type":"text","value":"the NCAR LENS website","key":"FJ97YO0iN5"}],"urlSource":"https://www.cesm.ucar.edu/projects/community-projects/LENS/data-sets.html","key":"eTO4Wh446i"},{"type":"text","value":". For interoperability, the ","key":"hAUngF7mjg"},{"type":"inlineCode","value":"long_name","key":"ZppnflL0Er"},{"type":"text","value":" column should be replaced by a ","key":"JWf6BYRpLy"},{"type":"inlineCode","value":"cf_name","key":"vpoivl9xqL"},{"type":"text","value":" column and possibly an ","key":"REsHr5FVqK"},{"type":"inlineCode","value":"attribute","key":"qDBUEcAjtF"},{"type":"text","value":" column to disambiguate if needed.","key":"KzBh01rset"}],"key":"Y567xBPfCM"}],"key":"wZ598yJ9R3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"List all available variables by long name, sorted alphabetically:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iMbEGmzOXb"}],"key":"xrAqhfE9H3"}],"key":"dOWnvVMqXz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nameList = coll.unique()['long_name']\nnameList.sort()\nprint(*nameList, sep='\\n')","key":"kZncI0yuli"},{"type":"output","id":"iJe27d5FETDL4OW9GalFq","data":[],"key":"rppQA5rZqA"}],"key":"ptsTOjV934"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Search capabilities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xhE6DWVJfj"}],"identifier":"search-capabilities","label":"Search capabilities","html_id":"search-capabilities","implicit":true,"key":"lqtyrCVqmH"}],"key":"P3n8SEltk6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can use an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HNmsYAeWGe"},{"type":"inlineCode","value":"intake-esm","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hHWI8dAmZh"},{"type":"text","value":" catalog object’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cwe54z1gQD"},{"type":"inlineCode","value":"search","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YB7Nguw7EA"},{"type":"text","value":" function in several ways:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JvGyCmexHr"}],"key":"UsJwIC8B3D"}],"key":"w7tlm7T6Qc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show all available data for a specific variable based on long name:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dldvW0qaQn"}],"key":"axYYzhRipF"}],"key":"bQyRo4ywz4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"myName = 'Salinity'\ndf = coll.search(long_name=myName).df\ndf","key":"bMmxPjqcwv"},{"type":"output","id":"cfInvCVhxz3MU4xcxwaOa","data":[],"key":"VhzIyhhBXt"}],"key":"hj0NafotMg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Search based on multiple criteria:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oFBZ5mBS5f"}],"key":"bpXmsaehA9"}],"key":"I0TipunIPG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(experiment=['20C','RCP85'], dim='3D', variable=['T','Q']).df\ndf","key":"IlMCS5CMJY"},{"type":"output","id":"2ZW125NdPhr8lGAEyaWIn","data":[],"key":"OtLLHhRiT7"}],"key":"wBoMHjVYcV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Substring matches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qtQtO5UvcM"}],"identifier":"substring-matches","label":"Substring matches","html_id":"substring-matches","implicit":true,"key":"B2fkSjjjBT"}],"key":"sIIGdv1NXD"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In some cases, you may not know the exact term to look for. For such cases, inkake-esm supports searching for substring matches. With use of wildcards and/or regular expressions, we can find all items with a particular substring in a given column. Let’s search for:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NqEbjGJp7M"}],"key":"Uc5weGVxkp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"entries from experiment = ‘20C’","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ti8wigurUz"}],"key":"pUr8JwBGuT"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"all entries whose variable long name contains wind","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jR2starhIb"}],"key":"ZpFuYpkZQY"}],"key":"dfEss8MWYz"}],"key":"weaag4F2iN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset = coll.search(experiment=\"20C\", long_name=\"Wind*\")","key":"sonqdZ4408"},{"type":"output","id":"GAQSLMeZSrwvhAsvKGIVx","data":[],"key":"mxsjS5tjrF"}],"key":"FCPgTltep0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset.df","key":"HV7QB5cAAZ"},{"type":"output","id":"HOwK-rm2XicGpFai1LCTT","data":[],"key":"Z1Uj8SqF2b"}],"key":"HoIKNv6rMZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we wanted to search for Wind and wind, we can take advantage of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CacLkyOBe6"},{"type":"link","url":"https://docs.python.org/3/library/re.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"regular expression","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qeAc63XbDX"}],"urlSource":"https://docs.python.org/3/library/re.html","key":"xtgfGoWPpG"},{"type":"text","value":" syntax to do so:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yH5hnDb2iB"}],"key":"TdNEtuQb06"}],"key":"YPw25vPWvu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset = coll.search(experiment=\"20C\" , long_name=\"[Ww]ind*\")","key":"bvDeA229iD"},{"type":"output","id":"xzy9sFFoOP7zUy4IDXOD7","data":[],"key":"zXl3XMoz9W"}],"key":"hCFFXUmusN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset.df","key":"iinYNl4QX6"},{"type":"output","id":"ipU4jSFRrOHWscR1MwD3j","data":[],"key":"BUktcpYELd"}],"key":"gscSZR6NGI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other attributes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v5hY2uzdig"}],"identifier":"other-attributes","label":"Other attributes","html_id":"other-attributes","implicit":true,"key":"IQqw9yvpCt"}],"key":"L9iSJPtaHU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other columns in the enhanced catalog may be useful. For example, the dimensionality column enables us to list all data from the ocean component that is 3D.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"N3qvhnlRqY"}],"key":"Rs9I9waROk"}],"key":"DnCe9Yvqwd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(dim=\"3D\",component=\"ocn\").df\ndf","key":"UJENbjL5Fv"},{"type":"output","id":"w3FFBUiRA_dhUZgMf9_PO","data":[],"key":"oggEFSXHBn"}],"key":"z8oMnymyyS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Spatiotemporal filtering","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q0ylHgTKHS"}],"identifier":"spatiotemporal-filtering","label":"Spatiotemporal filtering","html_id":"spatiotemporal-filtering","implicit":true,"key":"KKUnS9Qokn"}],"key":"RIigRQuywH"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If there were both regional and global data available (e.g., LENS and NA-CORDEX data for the same variable, both listed in same catalog), some type of coverage indicator (or columns for bounding box edges) could be listed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"i2xTWIdSXa"}],"key":"x4my93emIt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Temporal extent in LENS is conveyed by the experiment (HIST, 20C, etc) but this is imprecise and requires external documentation. We have added start/end columns to the catalog, but Intake-ESM currently does not have built-in functionality to filter based on time.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qcOLt52dTV"}],"key":"mGAKYQFtWk"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We can do a simple search that exactly matches a temporal value:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AxjUPM8NSo"}],"key":"vIrZDaO8xL"}],"key":"wLoNchsSn0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(dim=\"3D\",component=\"ocn\", end='2100-12').df\ndf","key":"V0eN78ge1Z"},{"type":"output","id":"vfPkDzQbSlSg9cvnVUtu_","data":[],"key":"lYGrRtw15e"}],"key":"HwrLbydMbE"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W0naR6rfYE"}],"key":"bOUIalD4fr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h6yuexA1N5"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"zYi6Att5r2"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook, we used Intake-ESM to explore a catalog of CESM LENS data. We then worked through some helpful features of the enhanced catalog.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qP0na6ldyD"}],"key":"OwSdIKhn5J"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"N9lO6wslyI"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"smXoq1oPQo"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will use this data to recreate some figures from a paper published in ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YgbI1nw6Yf"},{"type":"link","url":"https://www.ametsoc.org/index.cfm/ams/publications/bulletin-of-the-american-meteorological-society-bams/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"BAMS","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FkEwOva3jY"}],"urlSource":"https://www.ametsoc.org/index.cfm/ams/publications/bulletin-of-the-american-meteorological-society-bams/","key":"ELwHKsId9b"},{"type":"text","value":" that describes the CESM LENS project: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"v3iv76WNNI"},{"type":"citeGroup","kind":"narrative","children":[{"type":"cite","kind":"narrative","label":"Kay:2015a","identifier":"kay:2015a","children":[{"type":"text","value":"Kay ","key":"OVznK7w3bU"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"A7QxyyT9q9"}],"key":"LNiNSlpqvI"},{"type":"text","value":" (2015)","key":"vjLyShHCtp"}],"enumerator":"2","key":"tMDk5q80vX"}],"key":"osT8JrM4oW"}],"key":"DOBDPPLwDV"}],"key":"U5XT4ZZJQP"}],"key":"eArfCVDyOS"},"references":{"cite":{"order":["https://doi.org/10.26024/wt24-5j82","Kay:2015a"],"data":{"https://doi.org/10.26024/wt24-5j82":{"label":"https://doi.org/10.26024/wt24-5j82","enumerator":"1","doi":"10.26024/WT24-5J82","html":"de la Beaujardière, J., Banihirwe, A., Shi, C.-F., Paul, K., & Hamman, J. (2019). <i>NCAR CESM LENS Cloud-Optimized Subset</i>. UCAR/NCAR - Computational. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.26024/WT24-5J82\">10.26024/WT24-5J82</a>","url":"https://doi.org/10.26024/WT24-5J82"},"Kay:2015a":{"label":"Kay:2015a","enumerator":"2","doi":"10.1175/BAMS-D-13-00255.1","html":"Kay, J. E., Deser, C., Phillips, A., Mai, A., Hannay, C., Strand, G., Arblaster, J. M., Bates, S. C., Danabasoglu, G., Edwards, J., Holland, M., Kushner, P., Lamarque, J.-F., Lawrence, D., Lindsday, K., Middleton, A., Munoz, E., Neale, R., Oleson, K., … Vertenstein, M. (2015). The Community Earth System Model (CESM) Large Ensemble Project. <i>Bull. Amer. Meteor. Soc.</i> <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/BAMS-D-13-00255.1\">10.1175/BAMS-D-13-00255.1</a>","url":"https://doi.org/10.1175/BAMS-D-13-00255.1"}}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reproducing Key Figures from Kay et al. (2015)","url":"/notebooks/example-workflows/key-figures","group":"Example workflows"}}},"domain":"http://localhost:3000"}