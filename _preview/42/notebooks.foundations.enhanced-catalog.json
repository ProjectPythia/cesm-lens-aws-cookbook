{"version":2,"kind":"Notebook","sha256":"f936dab270ab8ed3c59d7ba55cfefc8b60115eb57c7b4a64fe915a0744aefc58","slug":"notebooks.foundations.enhanced-catalog","location":"/notebooks/foundations/enhanced-catalog.ipynb","dependencies":[],"frontmatter":{"title":"Enhanced Intake-ESM Catalog Demo","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bonnlander","given":"Brian","family":"Bonnlander"},"name":"Brian Bonnlander","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Jeff de La Beaujardière","given":"Jeff","non_dropping_particle":"de","family":"La Beaujardière"},"name":"Jeff de La Beaujardière","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Scott Henderson","given":"Scott","family":"Henderson"},"name":"Scott Henderson","id":"contributors-myst-generated-uid-3"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/cesm-lens-aws-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/projectpythia/cesm-lens-aws-cookbook/blob/HEAD/notebooks/foundations/enhanced-catalog.ipynb","edit_url":"https://github.com/projectpythia/cesm-lens-aws-cookbook/edit/HEAD/notebooks/foundations/enhanced-catalog.ipynb","thumbnail":"/cesm-lens-aws-cookbook/_preview/42/build/thumbnail-eedc19db12994c3dcb5873ada3a10c6a.png","exports":[{"format":"ipynb","filename":"enhanced-catalog.ipynb","url":"/cesm-lens-aws-cookbook/_preview/42/build/enhanced-catalog-6938edf72e7ceec4c2367b7091612b9f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"image","url":"/cesm-lens-aws-cookbook/_preview/42/build/thumbnail-eedc19db12994c3dcb5873ada3a10c6a.png","alt":"CESM LENS image","width":250,"key":"E4AEtuLMFM","urlSource":"../../thumbnail.png"}],"key":"bJQv2TyRus"}],"key":"vajXAXOy6C"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AVzxSIknRF"}],"key":"v8WLHY4aNI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HsN45RTqsw"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"CuJVoWgbXL"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook compares one ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pb65qst662"},{"type":"link","url":"https://intake-esm.readthedocs.io/en/stable/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Intake-ESM","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"L4aF88dpJD"}],"urlSource":"https://intake-esm.readthedocs.io/en/stable/","key":"SDfFyN8sRC"},{"type":"text","value":" catalog with an enhanced version that includes additional attributes. Both catalogs are an inventory of the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WqtPqnZk3a"},{"type":"cite","url":"https://doi.org/10.26024/wt24-5j82","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NCAR Community Earth System Model (CESM) Large Ensemble (LENS) data hosted on AWS S3","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bXgvlJ0tXa"}],"kind":"narrative","label":"https://doi.org/10.26024/wt24-5j82","identifier":"https://doi.org/10.26024/wt24-5j82","enumerator":"1","key":"W3m1hkYvKd"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jZXgft1TA7"}],"key":"n4dzLLRyxh"}],"key":"rpfq2StAf0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tKsnwaU5E8"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"AGYgxLgeOV"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NLNfHL0ALg"}],"key":"uYnkLKAzjC"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rDLhBY8leC"}],"key":"YIaPVJiTKw"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kvbiQo3b4B"}],"key":"GhD5spdfO3"}],"key":"TFcvJ101O3"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/pandas/pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to Pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TgzdgSOZj1"}],"urlSource":"https://foundations.projectpythia.org/core/pandas/pandas","key":"S3ug2i5bmv"}],"key":"WzLowsQ8zV"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AGJ7jnfEtc"}],"key":"efKqmr0ifV"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[],"key":"q7GXB4WzHv"}],"key":"k5xtHNUXoG"}],"key":"gA8iMGVbRi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JHtjYAN4fQ"}],"key":"FR2EIIHMAS"},{"type":"text","value":": 10 minutes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SBa4tH8U3b"}],"key":"sKRsh8HtqA"}],"key":"sIC0JCSiR6"}],"key":"Lzr8iHb4OH"}],"key":"oZL6vUqv0d"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"etYF55P711"}],"key":"TYOgIkWl2A"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xrfWDDWVxf"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"sgh8jXtEKF"}],"key":"BFDkrPk9wl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import intake\nimport pandas as pd","key":"MdrA2iox1J"},{"type":"output","id":"emnTC-PmHLiSBeDsr5tZh","data":[],"key":"M8BKtrXOtR"}],"key":"Rwz82iFsCw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Original Intake-ESM Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GJMZz5RNr3"}],"identifier":"original-intake-esm-catalog","label":"Original Intake-ESM Catalog","html_id":"original-intake-esm-catalog","implicit":true,"key":"waRZ1e3ATu"}],"key":"WWlX75y9os"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"At import time, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pKdhuJLKdI"},{"type":"inlineCode","value":"intake-esm","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zRvLSf98GG"},{"type":"text","value":" plugin is available in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lMS1ncyIn1"},{"type":"inlineCode","value":"intake","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IwRgiaIf1B"},{"type":"text","value":"’s registry as ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Oy8py4QyPl"},{"type":"inlineCode","value":"esm_datastore","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gowlmgOggs"},{"type":"text","value":" and can be accessed with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EoBR6f9DzZ"},{"type":"inlineCode","value":"intake.open_esm_datastore()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S3iPHScHgD"},{"type":"text","value":" function.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PbxN44nBXV"}],"key":"KxEuhHUpx7"}],"key":"K1YzU95CIx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url_orig = 'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le.json'\ncoll_orig = intake.open_esm_datastore(cat_url_orig)\ncoll_orig","key":"HgaWV7DzDR"},{"type":"output","id":"U-ej7kUJr4Xmgrh2I8pIn","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mAttributeError\u001b[39m                            Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[2]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m cat_url_orig = \u001b[33m'\u001b[39m\u001b[33mhttps://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le.json\u001b[39m\u001b[33m'\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m coll_orig = \u001b[43mintake\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_esm_datastore\u001b[49m\u001b[43m(\u001b[49m\u001b[43mcat_url_orig\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m      3\u001b[39m coll_orig\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/cla-cookbook-dev/lib/python3.11/site-packages/intake_esm/core.py:124\u001b[39m, in \u001b[36mesm_datastore.__init__\u001b[39m\u001b[34m(self, obj, progressbar, sep, registry, read_csv_kwargs, columns_with_iterables, storage_options, threaded, **intake_kwargs)\u001b[39m\n\u001b[32m    122\u001b[39m     \u001b[38;5;28mself\u001b[39m.esmcat = ESMCatalogModel.from_dict(obj)\n\u001b[32m    123\u001b[39m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m124\u001b[39m     \u001b[38;5;28mself\u001b[39m.esmcat = \u001b[43mESMCatalogModel\u001b[49m\u001b[43m.\u001b[49m\u001b[43mload\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    125\u001b[39m \u001b[43m        \u001b[49m\u001b[43mobj\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mread_csv_kwargs\u001b[49m\u001b[43m=\u001b[49m\u001b[43mread_csv_kwargs\u001b[49m\n\u001b[32m    126\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    128\u001b[39m \u001b[38;5;28mself\u001b[39m.derivedcat = registry \u001b[38;5;129;01mor\u001b[39;00m default_registry\n\u001b[32m    129\u001b[39m \u001b[38;5;28mself\u001b[39m._entries = {}\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/cla-cookbook-dev/lib/python3.11/site-packages/intake_esm/cat.py:255\u001b[39m, in \u001b[36mESMCatalogModel.load\u001b[39m\u001b[34m(cls, json_file, storage_options, read_csv_kwargs)\u001b[39m\n\u001b[32m    253\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m'\u001b[39m\u001b[33mlast_updated\u001b[39m\u001b[33m'\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m data:\n\u001b[32m    254\u001b[39m     data[\u001b[33m'\u001b[39m\u001b[33mlast_updated\u001b[39m\u001b[33m'\u001b[39m] = \u001b[38;5;28;01mNone\u001b[39;00m\n\u001b[32m--> \u001b[39m\u001b[32m255\u001b[39m cat = \u001b[38;5;28;43mcls\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mmodel_validate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    256\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m cat.catalog_file:\n\u001b[32m    257\u001b[39m     cat._frames = cat._df_from_file(cat, _mapper, storage_options, read_csv_kwargs)\n\n    \u001b[31m[... skipping hidden 1 frame]\u001b[39m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/cla-cookbook-dev/lib/python3.11/site-packages/intake_esm/cat.py:76\u001b[39m, in \u001b[36mAssets._validate_data_format\u001b[39m\u001b[34m(cls, model)\u001b[39m\n\u001b[32m     74\u001b[39m \u001b[38;5;129m@pydantic\u001b[39m.model_validator(mode=\u001b[33m'\u001b[39m\u001b[33mafter\u001b[39m\u001b[33m'\u001b[39m)\n\u001b[32m     75\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34m_validate_data_format\u001b[39m(\u001b[38;5;28mcls\u001b[39m, model):\n\u001b[32m---> \u001b[39m\u001b[32m76\u001b[39m     data_format, format_column_name = \u001b[43mmodel\u001b[49m\u001b[43m.\u001b[49m\u001b[43mformat\u001b[49m, model.format_column_name\n\u001b[32m     77\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m data_format \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m format_column_name \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m     78\u001b[39m         \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m'\u001b[39m\u001b[33mCannot set both format and format_column_name\u001b[39m\u001b[33m'\u001b[39m)\n\n\u001b[31mAttributeError\u001b[39m: 'pydantic_core._pydantic_core.ValidationInfo' object has no attribute 'format'","ename":"AttributeError","evalue":"'pydantic_core._pydantic_core.ValidationInfo' object has no attribute 'format'"}],"key":"FL81zoBNFr"}],"key":"JPx6XzWVRu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Here’s a summary representation:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"og0o5OMlVU"}],"key":"SeTlnImzSN"}],"key":"gULOjoYADC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(coll_orig)","key":"uXSPpJ2SCx"},{"type":"output","id":"OWfaaCGW4FQkIR2KENmfi","data":[],"key":"bPH7ISAmnM"}],"key":"DsVd0U2DEy"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In an Intake-ESM catalog object, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nc4MP63wcn"},{"type":"inlineCode","value":"esmcat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WHkHIKnpGl"},{"type":"text","value":" class provides many useful attributes and functions. For example, we can get the collection’s description:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c3HireFKiv"}],"key":"YJ9T8esUtf"}],"key":"kxdwerRhTy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_orig.esmcat.description","key":"jSEkIUG56N"},{"type":"output","id":"bAwXcB1aJWXqGfQyjYiNu","data":[],"key":"iy4e0vm5oM"}],"key":"RHE1CU2jt3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also get the URL pointing to the catalog’s underlying tabular representation:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mTkZOzvpEE"}],"key":"Ex5ev1I4Bk"}],"key":"ufCKaFJFhC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_orig.esmcat.catalog_file","key":"GYqhRtBPDh"},{"type":"output","id":"I3j48lA9LxX67PuGZwY2r","data":[],"key":"IJ01w212Mg"}],"key":"URj4R2ybym"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"That’s a CSV file ... let’s take a peek.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b2h7hKO7fg"}],"key":"znTm44W9pj"}],"key":"U2ouE1VGjF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_orig = pd.read_csv(coll_orig.esmcat.catalog_file)\ndf_orig","key":"XPygH4gEZi"},{"type":"output","id":"YAqnYz6hWC8K2ql3pOtBs","data":[],"key":"pJH6UMYe23"}],"key":"NlsBGD8yyN"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"However, we can save a step since an ESM catalog object provides a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u10SpXjmDh"},{"type":"inlineCode","value":"df","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x6YUMvaD0K"},{"type":"text","value":" instance which returns a dataframe too:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hiCD2curbe"}],"key":"jfVAkjSQsi"}],"key":"R9bINk0tU6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_orig = coll_orig.df\ndf_orig","key":"H4VfPhX5fc"},{"type":"output","id":"XTjde2H5YxeoOGJ8XmYoH","data":[],"key":"Xk2uJO6aDR"}],"key":"HeDzxe4gkh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Print out a sorted list of the unique values of selected columns","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mg80HOs3lj"}],"key":"HJ71kZRvme"}],"key":"k8KiKDcpyR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for col in ['component', 'frequency', 'experiment', 'variable']:\n    unique_vals = coll_orig.unique()[col]\n    unique_vals.sort()\n    count = len(unique_vals)\n    print (col + ': ' ,unique_vals, \" count: \", count, '\\n')","key":"IoKr2fbGlA"},{"type":"output","id":"qksZVfTuikGniwOl-Lqe4","data":[],"key":"QIum84l1bg"}],"key":"Y6H9hEnZzU"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finding Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R8kn2arLHE"}],"identifier":"finding-data","label":"Finding Data","html_id":"finding-data","implicit":true,"key":"Ow5OZFVb7n"}],"key":"S0i7L4u7Ab"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you happen to know the meaning of the variable names, you can find what data are available for that variable. For example:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U7pes3cZMu"}],"key":"jv7x5j8wjU"}],"key":"tZVBJmKPqh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll_orig.search(variable='FLNS').df\ndf","key":"avNN18lFxl"},{"type":"output","id":"XRkUcX7CHwsC8vqM1q474","data":[],"key":"uQ4KlxEkgS"}],"key":"ZEY0dhckRl"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can narrow the filter to specific frequency and experiment:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F69CC3usqx"}],"key":"LF1Iq9f27f"}],"key":"VqqPpq7Lqh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll_orig.search(variable='FLNS', frequency='daily', experiment='RCP85').df\ndf","key":"uuOLKIyuO4"},{"type":"output","id":"_G-fBCLgRgpNXyWGf0vLw","data":[],"key":"TOZQVXxexI"}],"key":"y2yAjcXRwS"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-warning","children":[{"type":"strong","children":[{"type":"text","value":"The problem: ","key":"MKg3pFiFHf"}],"key":"Bz7ppZF6hP"},{"type":"text","value":"Do all potential users know that `FLNS` is a CESM-specific abbreviation for \"net longwave flux at surface”? How would a novice user find out, other than by finding separate documentation, or by opening a Zarr store in the hopes that the long name might be recorded there? How do we address the fact that every climate model code seems to have a different, non-standard name for all the variables, thus making multi-source research needlessly difficult?","key":"BAba3F0br5"}],"key":"K3nPOQmAQc"}],"key":"SJ0bOD46Eq"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-success","children":[{"type":"strong","children":[{"type":"text","value":"The solution:","key":"W8kRY0KBlN"}],"key":"Rv7eMEQSb9"},{"type":"break","key":"c3NcyhS6fd"},{"type":"heading","depth":2,"children":[{"type":"emphasis","children":[{"type":"text","value":"Enhanced","key":"Q9FJHaIWl4"}],"key":"N0PaGFsAhm"},{"type":"text","value":" Intake-ESM Catalog!","key":"oBRxAub74c"}],"identifier":"enhanced-intake-esm-catalog","label":"Enhanced Intake-ESM Catalog!","html_id":"enhanced-intake-esm-catalog","implicit":true,"key":"hXBRlYEF18"}],"key":"CYigIhTepo"}],"key":"CWi0yKM4QT"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"By adding additional columns to the Intake-ESM catalog, we should be able to improve semantic interoperability and provide potentially useful information to the users. Let’s now open the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gAVISX6mdP"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"enhanced","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SSwCEOx2lZ"}],"key":"s0TMjqeVcb"},{"type":"text","value":" collection description file:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l3ge1Xwrzj"}],"key":"gNZETQOZOQ"}],"key":"dJxVEuYyHD"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-info","children":[{"type":"strong","children":[{"type":"text","value":"Note: ","key":"EdJqPwLR0W"}],"key":"KcjS5kWyyM"},{"type":"text","value":"The URL for the enhanced catalog differs from the original only in that it has ","key":"uL6olNJ5E9"},{"type":"inlineCode","value":"-enhanced","key":"Zed6URQldJ"},{"type":"text","value":" appended to ","key":"WuK1nbRcLg"},{"type":"inlineCode","value":"aws-cesm1-le","key":"CO2YR61t2Q"}],"key":"NEuic8tP7A"}],"key":"TKLQYZa2KS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url = 'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le-enhanced.json'\ncoll = intake.open_esm_datastore(cat_url)\ncoll","key":"XjfDQ6Qska"},{"type":"output","id":"gcqsOXfagO63YbJHM2mk-","data":[],"key":"KKZx6q5xUf"}],"key":"u8R8EEcoI0"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As we did for the first catalog, let’s obtain the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A5AOfqL3Xn"},{"type":"inlineCode","value":"description","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eWobZ2dwTn"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kgmZZMg7VN"},{"type":"inlineCode","value":"catalog_file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e0WlF1Qyvc"},{"type":"text","value":" attributes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Aa1nMmjAyF"}],"key":"P50FbHy1HP"}],"key":"kPujeuUTnr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(coll.esmcat.description) # Description of collection\nprint(\"Catalog file:\", coll.esmcat.catalog_file)\nprint(coll) # Summary of collection structure","key":"ng5P1ahB3n"},{"type":"output","id":"dCx0INXrg19QAPw39-qx3","data":[],"key":"tWQUYusRo6"}],"key":"uwd4JJ6VpO"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Long names","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"P5aWVlncsh"}],"identifier":"long-names","label":"Long names","html_id":"long-names","implicit":true,"key":"AQqYNVT8qX"}],"visibility":"show","key":"C6pEWyLZaO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In the catalog’s representation above, note the addition of additional elements: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tilXn8uHta"},{"type":"inlineCode","value":"long_name","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WP2RAtXe4N"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tE66jwamhf"},{"type":"inlineCode","value":"start","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ppCMnBA6g4"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TLl0P7MuDR"},{"type":"inlineCode","value":"end","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xFqbwXNefx"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uiqwj83dd1"},{"type":"inlineCode","value":"dim","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ASYeS4xVZh"},{"type":"text","value":". Here are the first/last few lines of the enhanced catalog:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hEeiBGG9WR"}],"key":"B1bAa8T7Hj"}],"key":"tbjV4Qo8O6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_enh = coll.df\ndf_enh","key":"QMRn2xDvyv"},{"type":"output","id":"dcGGp6bqLGcktj-Hh3vQi","data":[],"key":"jmvoxbJr2X"}],"key":"wOLQ5zrQa0"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Warning","key":"Lcub9mxuYG"}],"key":"xwtORXb3S7"},{"type":"text","value":"The ","key":"frHv9wroDN"},{"type":"inlineCode","value":"long_name","key":"WeDP2f4Txx"},{"type":"text","value":"s are ","key":"bA5J2NWOSF"},{"type":"emphasis","children":[{"type":"text","value":"not","key":"TGbysEUjXs"}],"key":"PMuaAfg5xN"},{"type":"text","value":" ","key":"ks5xZt0Qss"},{"type":"link","url":"https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html","children":[{"type":"text","value":"CF Standard Names","key":"yeJ0FYtddw"}],"urlSource":"https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html","key":"JyOxUmdobl"},{"type":"text","value":", but rather are those documented at ","key":"Qh7uaRnIlm"},{"type":"link","url":"https://www.cesm.ucar.edu/projects/community-projects/LENS/data-sets.html","children":[{"type":"text","value":"the NCAR LENS website","key":"SmDLfzurP6"}],"urlSource":"https://www.cesm.ucar.edu/projects/community-projects/LENS/data-sets.html","key":"hYxx8nuMap"},{"type":"text","value":". For interoperability, the ","key":"O8ThtUQvvZ"},{"type":"inlineCode","value":"long_name","key":"ML6wU2FyKx"},{"type":"text","value":" column should be replaced by a ","key":"k57fOQJDj8"},{"type":"inlineCode","value":"cf_name","key":"xwImgPU3v0"},{"type":"text","value":" column and possibly an ","key":"pl3NCCR4FR"},{"type":"inlineCode","value":"attribute","key":"gv3mDmAEZq"},{"type":"text","value":" column to disambiguate if needed.","key":"qdsPr4qoq8"}],"key":"eucBaNhVc7"}],"key":"UEw8f9iO4H"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"List all available variables by long name, sorted alphabetically:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mE0Yy9Vr2Q"}],"key":"SvyFQi8fDt"}],"key":"VP0NB0Kc9k"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nameList = coll.unique()['long_name']\nnameList.sort()\nprint(*nameList, sep='\\n')","key":"AIkO4y4sQ1"},{"type":"output","id":"74ynpeexOZZxEPp3BLuzf","data":[],"key":"WKQWNNe9Lg"}],"key":"ySKljnBBnX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Search capabilities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dKc5yqoM4T"}],"identifier":"search-capabilities","label":"Search capabilities","html_id":"search-capabilities","implicit":true,"key":"aufnoLZ1pX"}],"key":"RSMhGpRIAK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can use an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JSC7vL36lD"},{"type":"inlineCode","value":"intake-esm","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"grdQ3s4xvc"},{"type":"text","value":" catalog object’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sWVcBZ0j9S"},{"type":"inlineCode","value":"search","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t9iAKdnwFd"},{"type":"text","value":" function in several ways:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x6MuhlxlAc"}],"key":"kGWpQenAWV"}],"key":"M0Her0DrHh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show all available data for a specific variable based on long name:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U0SU7P7cA1"}],"key":"d52jvP79F1"}],"key":"fM1aca3R5f"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"myName = 'Salinity'\ndf = coll.search(long_name=myName).df\ndf","key":"zlcllkgPKL"},{"type":"output","id":"bz8lR2UAPNJRV1seYDivm","data":[],"key":"TPrPrYGosc"}],"key":"GhFoV1y7LP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Search based on multiple criteria:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qE9Czsm1Fe"}],"key":"m7JGXkGu2z"}],"key":"bXg23Jxo90"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(experiment=['20C','RCP85'], dim='3D', variable=['T','Q']).df\ndf","key":"KCNyjkZb0J"},{"type":"output","id":"gSsC2FRM4lCqmW0bWD5EW","data":[],"key":"sZTtzIc8lK"}],"key":"ooPU8HON04"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Substring matches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R9ImengYNK"}],"identifier":"substring-matches","label":"Substring matches","html_id":"substring-matches","implicit":true,"key":"oO1h2tnRKa"}],"key":"Ygifo0aykY"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In some cases, you may not know the exact term to look for. For such cases, inkake-esm supports searching for substring matches. With use of wildcards and/or regular expressions, we can find all items with a particular substring in a given column. Let’s search for:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UkJruFtUHr"}],"key":"wrUJGZz9Rj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"entries from experiment = ‘20C’","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Nc5GIxQDha"}],"key":"ib28KelDYG"}],"key":"FttNqPf9CE"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"all entries whose variable long name contains wind","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LrwCwkpuc2"}],"key":"kf7xZ7DecX"}],"key":"ZV4vg7W2lo"}],"key":"ucUtj1vGwe"}],"key":"aUxIffp8td"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset = coll.search(experiment=\"20C\", long_name=\"Wind*\")","key":"CCtUxXsq4y"},{"type":"output","id":"fHNGqm-s-9jiEtIuyjjb3","data":[],"key":"DbiprylEKv"}],"key":"dUEPj689yM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset.df","key":"hQ4dY7s9oE"},{"type":"output","id":"6gPShbVN7QirSY0kMnkiS","data":[],"key":"RYt28vlFn8"}],"key":"tmOBbsGC6B"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we wanted to search for Wind and wind, we can take advantage of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hcpg06XrcQ"},{"type":"link","url":"https://docs.python.org/3/library/re.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"regular expression","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JyYnV89a1P"}],"urlSource":"https://docs.python.org/3/library/re.html","key":"aa3xxxggYm"},{"type":"text","value":" syntax to do so:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gWDqV7x75U"}],"key":"RQq0v5vKBB"}],"key":"odVSwcCm14"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset = coll.search(experiment=\"20C\" , long_name=\"[Ww]ind*\")","key":"EMLOzHpaKy"},{"type":"output","id":"0kSPr0k2ZOeuGzDuqojPU","data":[],"key":"FFgOKEsk47"}],"key":"HMrsHcHb1I"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"coll_subset.df","key":"nuwRdNx2dj"},{"type":"output","id":"8fnZWSYstS5cHcIH0zlnZ","data":[],"key":"H9LxUX4I1m"}],"key":"zQlsYpX2Ry"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other attributes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A3P3KdtQJY"}],"identifier":"other-attributes","label":"Other attributes","html_id":"other-attributes","implicit":true,"key":"yMaMcwEoCD"}],"key":"nPPrXWbd5j"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other columns in the enhanced catalog may be useful. For example, the dimensionality column enables us to list all data from the ocean component that is 3D.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NdRD18yTzF"}],"key":"tqtlFWfnVx"}],"key":"OU7MKpLySQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(dim=\"3D\",component=\"ocn\").df\ndf","key":"Vr7LW7aWFX"},{"type":"output","id":"1NwggK-YhxyC_h5unq9tq","data":[],"key":"nSHfFqUq6G"}],"key":"jdj9f7edGo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Spatiotemporal filtering","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B4Wm9w8lOl"}],"identifier":"spatiotemporal-filtering","label":"Spatiotemporal filtering","html_id":"spatiotemporal-filtering","implicit":true,"key":"enjj8JZoLV"}],"key":"AcdjQAIIpt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If there were both regional and global data available (e.g., LENS and NA-CORDEX data for the same variable, both listed in same catalog), some type of coverage indicator (or columns for bounding box edges) could be listed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HOiLWIz9up"}],"key":"qU0FxDmQ7j"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Temporal extent in LENS is conveyed by the experiment (HIST, 20C, etc) but this is imprecise and requires external documentation. We have added start/end columns to the catalog, but Intake-ESM currently does not have built-in functionality to filter based on time.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WgCGBGVkR1"}],"key":"rtRdZtdacZ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We can do a simple search that exactly matches a temporal value:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DzE0B1BYr3"}],"key":"IWvAht5MGG"}],"key":"MHxCIkedQW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df = coll.search(dim=\"3D\",component=\"ocn\", end='2100-12').df\ndf","key":"hqsgk3WOlU"},{"type":"output","id":"kYYRFbWJqclV1WzKfcpjG","data":[],"key":"PNYs9HXaog"}],"key":"ODYlJ7t4R7"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dQI7EjQWCS"}],"key":"kzB6PbAxjV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YeGsuX1e42"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"wRbNFOuw5c"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook, we used Intake-ESM to explore a catalog of CESM LENS data. We then worked through some helpful features of the enhanced catalog.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b5zILv4P8o"}],"key":"G1sicqKRgT"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ujaCrih6Ki"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"nqtN2PdprY"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will use this data to recreate some figures from a paper published in ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PNPl2QaWKj"},{"type":"link","url":"https://www.ametsoc.org/index.cfm/ams/publications/bulletin-of-the-american-meteorological-society-bams/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"BAMS","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oNodszmIOM"}],"urlSource":"https://www.ametsoc.org/index.cfm/ams/publications/bulletin-of-the-american-meteorological-society-bams/","key":"ctOU4dobwo"},{"type":"text","value":" that describes the CESM LENS project: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"L6wjgCgfOu"},{"type":"citeGroup","kind":"narrative","children":[{"type":"cite","kind":"narrative","label":"Kay:2015a","identifier":"kay:2015a","children":[{"type":"text","value":"Kay ","key":"F4BTM7KfOi"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"jeVqMz5X6R"}],"key":"leCsleRlgd"},{"type":"text","value":" (2015)","key":"IrWMBqxW4y"}],"enumerator":"2","key":"SRiRrNvTL3"}],"key":"JEykgaKvPi"}],"key":"KSTm4qNQWL"}],"key":"EWdfWoELeR"}],"key":"W5RBksoHag"},"references":{"cite":{"order":["https://doi.org/10.26024/wt24-5j82","Kay:2015a"],"data":{"https://doi.org/10.26024/wt24-5j82":{"label":"https://doi.org/10.26024/wt24-5j82","enumerator":"1","doi":"10.26024/WT24-5J82","html":"de la Beaujardière, J., Banihirwe, A., Shi, C.-F., Paul, K., & Hamman, J. (2019). <i>NCAR CESM LENS Cloud-Optimized Subset</i>. UCAR/NCAR - Computational. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.26024/WT24-5J82\">10.26024/WT24-5J82</a>","url":"https://doi.org/10.26024/WT24-5J82"},"Kay:2015a":{"label":"Kay:2015a","enumerator":"2","doi":"10.1175/BAMS-D-13-00255.1","html":"Kay, J. E., Deser, C., Phillips, A., Mai, A., Hannay, C., Strand, G., Arblaster, J. M., Bates, S. C., Danabasoglu, G., Edwards, J., Holland, M., Kushner, P., Lamarque, J.-F., Lawrence, D., Lindsday, K., Middleton, A., Munoz, E., Neale, R., Oleson, K., … Vertenstein, M. (2015). The Community Earth System Model (CESM) Large Ensemble Project. <i>Bull. Amer. Meteor. Soc.</i> <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/BAMS-D-13-00255.1\">10.1175/BAMS-D-13-00255.1</a>","url":"https://doi.org/10.1175/BAMS-D-13-00255.1"}}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reproducing Key Figures from Kay et al. (2015)","url":"/notebooks/example-workflows/key-figures","group":"Example workflows"}}},"domain":"http://localhost:3000"}